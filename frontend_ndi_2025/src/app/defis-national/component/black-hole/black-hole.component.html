<div 
  class="black-hole-container"
  [style.left.%]="blackHole.x"
  [style.top.%]="blackHole.y"
  [style.width.px]="blackHole.size"
  [style.height.px]="blackHole.size"
  [class.pulling]="isNear"
  [class.menu-open]="isMenuOpen()"
>
  <svg class="black-hole-svg" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
    
    <g class="rotating-spirals" #rotatingGroup>
      <path d="M100,80 C135,80 160,120 160,160" fill="none" stroke-width="1" stroke-linecap="round"/>
      <path d="M100,80 C135,80 160,120 160,160" fill="none" stroke-width="1" stroke-linecap="round" transform="rotate(22.5, 100, 100)"/>
      <path d="M100,80 C135,80 160,120 160,160" fill="none" stroke-width="1" stroke-linecap="round" transform="rotate(45, 100, 100)"/>
      <path d="M100,80 C135,80 160,120 160,160" fill="none" stroke-width="1" stroke-linecap="round" transform="rotate(67.5, 100, 100)"/>
      
      <path d="M100,80 C135,80 160,120 160,160" fill="none" stroke-width="1" stroke-linecap="round" transform="rotate(90, 100, 100)"/>
      <path d="M100,80 C135,80 160,120 160,160" fill="none" stroke-width="1" stroke-linecap="round" transform="rotate(112.5, 100, 100)"/>
      <path d="M100,80 C135,80 160,120 160,160" fill="none" stroke-width="1" stroke-linecap="round" transform="rotate(135, 100, 100)"/>
      <path d="M100,80 C135,80 160,120 160,160" fill="none" stroke-width="1" stroke-linecap="round" transform="rotate(157.5, 100, 100)"/>
      
      <path d="M100,80 C135,80 160,120 160,160" fill="none" stroke-width="1" stroke-linecap="round" transform="rotate(180, 100, 100)"/>
      <path d="M100,80 C135,80 160,120 160,160" fill="none" stroke-width="1" stroke-linecap="round" transform="rotate(202.5, 100, 100)"/>
      <path d="M100,80 C135,80 160,120 160,160" fill="none" stroke-width="1" stroke-linecap="round" transform="rotate(225, 100, 100)"/>
      <path d="M100,80 C135,80 160,120 160,160" fill="none" stroke-width="1" stroke-linecap="round" transform="rotate(247.5, 100, 100)"/>
      
      <path d="M100,80 C135,80 160,120 160,160" fill="none" stroke-width="1" stroke-linecap="round" transform="rotate(270, 100, 100)"/>
      <path d="M100,80 C135,80 160,120 160,160" fill="none" stroke-width="1" stroke-linecap="round" transform="rotate(292.5, 100, 100)"/>
      <path d="M100,80 C135,80 160,120 160,160" fill="none" stroke-width="1" stroke-linecap="round" transform="rotate(315, 100, 100)"/>
      <path d="M100,80 C135,80 160,120 160,160" fill="none" stroke-width="1" stroke-linecap="round" transform="rotate(337.5, 100, 100)"/>
    </g>

    <circle 
      class="black-hole-disk"
      cx="100" 
      cy="100" 
      r="18"
      [style.transform]="'scale(' + coreScale() + ')'"
    />
    
    <circle 
       class="event-horizon-glow"
       cx="100" 
       cy="100" 
       r="18"
       [style.transform]="'scale(' + coreScale() + ')'"
    />

  </svg>

  <div class="black-hole-name">{{ blackHole.name }}</div>

  @if (isNear && !isMenuOpen()) {
    <div class="interact-hint">
      <span>âš¡ ESPACE pour ouvrir le PORTAIL</span>
    </div>
  }
</div>

<!-- MENU PORTAIL DIMENSIONNEL -->
@if (isMenuOpen()) {
  <div class="portal-overlay" (click)="closeMenu()">
    <div class="portal-menu" (click)="$event.stopPropagation()">
      <div class="portal-header">
        <div class="portal-title-wrapper">
          <span class="portal-icon">ðŸŒ€</span>
          <h2 class="portal-title">PORTAIL DIMENSIONNEL</h2>
        </div>
        <p class="portal-subtitle">Choisissez votre destination</p>
        <button class="portal-close" (click)="closeMenu()">âœ•</button>
      </div>
      
      <div class="portal-destinations">
        @for (dest of destinations; track dest.id; let i = $index) {
          <div 
            class="destination-item"
            [class.selected]="selectedIndex() === i"
            [style.--dest-color]="dest.color"
            (click)="selectDestination(dest)"
            (mouseenter)="selectedIndex.set(i)"
          >
            <div class="dest-icon">{{ dest.icon }}</div>
            <div class="dest-info">
              <span class="dest-name">{{ dest.name }}</span>
              <span class="dest-description">{{ dest.description }}</span>
            </div>
            <div class="dest-arrow">â†’</div>
          </div>
        }
      </div>
      
      <div class="portal-footer">
        <span class="portal-controls">â†‘â†“ Naviguer | ENTRÃ‰E SÃ©lectionner | ESC Fermer</span>
      </div>
    </div>
  </div>
}